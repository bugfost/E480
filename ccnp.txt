1.1路由原理


osi/tcp/IP协议
传输层：提供可靠和不可靠协议
UDP、TCP

网络层：
寻址、路由作用

数据链路层；
数据传输过程中，通过以太一段一段传递
负责相邻链路之间传送


传输层：通过端口号识别上层数据类型
网络层：通过协议号识别上层协议
tcp：6
udp：17
eigrp：88
ospf:89

数据链路层：也是用协议号
以太网：
ip：0800
arp：0806
ppp
IP：0021

数据包从接口转发条件：
1、有路由
2、下一跳
3、有封装：数据链路上的封装对应
ARP表：2层到3层的封装信息
需要有3层到2层的映射的映射关系数据包才可以传递

本质上先通过2层协议，再进行3层协议

负载均衡：
多条下一跳指向不同的出接口

静态：
同掩码、同AD、不同下一跳
动态
同AD、同metric、不同下一跳


距离矢量协议：
传闻协议，只知道相邻的路由信息

链路状态；
知道全网的路由拓扑和路由信息

pre：前导码，标明产生了一个正常的祯

路由器会接收的祯：
匹配的单播祯、广播帧、组播祯


PC会丢弃IP包
路由器会去根据路由表转发IP包

查询arp表找对应mac
查路由表看下是否有路由
查看协议号是UDP还是TCP
查看端口号是什么应用


2层经历一个3层就会全部变化
3层原目的IP地址不变
但是TTL值变化了，校验和也变了（与TTL值有关）TTL见到为1则不转发了



















